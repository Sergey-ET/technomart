const cartButton = document.querySelectorAll(".product-button-buy"),
  cartPopup = document.querySelector(".modal-cart"),
  cartClose = cartPopup.querySelector(".modal-close"),
  cartContinueButton = cartPopup.querySelector(".modal-cart-button");
cartButton.forEach(function (e) {
  e.addEventListener("click", function (e) {
    e.preventDefault(), cartPopup.classList.add("modal-show");
  });
}),
  cartClose.addEventListener("click", function (e) {
    e.preventDefault(), cartPopup.classList.remove("modal-show");
  }),
  cartContinueButton.addEventListener("click", function (e) {
    e.preventDefault(), cartPopup.classList.remove("modal-show");
  }),
  window.addEventListener("keydown", function (e) {
    27 === e.keyCode &&
      cartPopup.classList.contains("modal-show") &&
      (e.preventDefault(), cartPopup.classList.remove("modal-show"));
  });
const sliderPromoButtonForward = document.querySelector(
    ".promo-slider-button-forward"
  ),
  sliderPromoButtonBack = document.querySelector(".promo-slider-button-back"),
  sliderPromoSlideFirst = document.querySelector(".promo-slide-first"),
  sliderPromoSlideSecond = document.querySelector(".promo-slide-second"),
  sliderPromoPaginationFirst = document.querySelector(
    ".promo-slider-pagination-button-first"
  ),
  sliderPromoPaginationSecond = document.querySelector(
    ".promo-slider-pagination-button-second"
  );
sliderPromoButtonForward.addEventListener("click", function (e) {
  e.preventDefault(),
    sliderPromoSlideFirst.classList.toggle("promo-slide-current"),
    sliderPromoSlideSecond.classList.toggle("promo-slide-current"),
    sliderPromoPaginationFirst.classList.toggle(
      "promo-slider-pagination-current"
    ),
    sliderPromoPaginationSecond.classList.toggle(
      "promo-slider-pagination-current"
    );
}),
  sliderPromoButtonBack.addEventListener("click", function (e) {
    e.preventDefault(),
      sliderPromoSlideFirst.classList.toggle("promo-slide-current"),
      sliderPromoSlideSecond.classList.toggle("promo-slide-current"),
      sliderPromoPaginationFirst.classList.toggle(
        "promo-slider-pagination-current"
      ),
      sliderPromoPaginationSecond.classList.toggle(
        "promo-slider-pagination-current"
      );
  });
const sliderServicesTabDelivery = document.querySelector(
    ".services-tab-delivery"
  ),
  sliderServicesTabGuarantee = document.querySelector(
    ".services-tab-guarantee"
  ),
  sliderServicesTabCredit = document.querySelector(".services-tab-credit"),
  sliderServicesContentDelivery = document.querySelector(
    ".service-content-delivery"
  ),
  sliderServicesContentGuarantee = document.querySelector(
    ".service-content-guarantee"
  ),
  sliderServicesContentCredit = document.querySelector(
    ".service-content-credit"
  );
sliderServicesTabDelivery.addEventListener("click", function (e) {
  e.preventDefault(),
    sliderServicesTabCredit.classList.remove("services-tab-active"),
    sliderServicesContentCredit.classList.remove("service-content-active"),
    sliderServicesTabGuarantee.classList.remove("services-tab-active"),
    sliderServicesContentGuarantee.classList.remove("service-content-active"),
    sliderServicesTabDelivery.classList.add("services-tab-active"),
    sliderServicesContentDelivery.classList.add("service-content-active");
}),
  sliderServicesTabGuarantee.addEventListener("click", function (e) {
    e.preventDefault(),
      sliderServicesTabDelivery.classList.remove("services-tab-active"),
      sliderServicesContentDelivery.classList.remove("service-content-active"),
      sliderServicesTabCredit.classList.remove("services-tab-active"),
      sliderServicesContentCredit.classList.remove("service-content-active"),
      sliderServicesTabGuarantee.classList.add("services-tab-active"),
      sliderServicesContentGuarantee.classList.add("service-content-active");
  }),
  sliderServicesTabCredit.addEventListener("click", function (e) {
    e.preventDefault(),
      sliderServicesTabDelivery.classList.remove("services-tab-active"),
      sliderServicesContentDelivery.classList.remove("service-content-active"),
      sliderServicesTabGuarantee.classList.remove("services-tab-active"),
      sliderServicesContentGuarantee.classList.remove("service-content-active"),
      sliderServicesTabCredit.classList.add("services-tab-active"),
      sliderServicesContentCredit.classList.add("service-content-active");
  });
const feedbackButton = document.querySelector(".contacts-button"),
  feedbackPopup = document.querySelector(".modal-feedback"),
  feedbackClose = feedbackPopup.querySelector(".modal-close"),
  feedbackForm = feedbackPopup.querySelector(".feedback-form"),
  feedbackName = feedbackPopup.querySelector(".feedback-input-name"),
  feedbackEmail = feedbackPopup.querySelector(".feedback-input-email"),
  feedbackMessage = feedbackPopup.querySelector(".feedback-input-message"),
  mapLink = document.querySelector(".contacts-map"),
  mapPopup = document.querySelector(".modal-map"),
  mapClose = mapPopup.querySelector(".modal-close");
let isStorageSupport = !0,
  storageName = "",
  storageEmail = "";
try {
  (storageName = localStorage.getItem("name")),
    (storageEmail = localStorage.getItem("email"));
} catch (e) {
  isStorageSupport = !1;
}
feedbackButton.addEventListener("click", function (e) {
  e.preventDefault(),
    feedbackPopup.classList.add("modal-show"),
    storageName && storageEmail
      ? ((feedbackName.value = storageName),
        (feedbackEmail.value = storageEmail),
        feedbackMessage.focus())
      : feedbackName.focus();
}),
  feedbackClose.addEventListener("click", function (e) {
    e.preventDefault(),
      feedbackPopup.classList.remove("modal-show"),
      feedbackPopup.classList.remove("modal-error");
  }),
  feedbackForm.addEventListener("submit", function (e) {
    feedbackName.value && feedbackEmail.value && feedbackMessage.value
      ? isStorageSupport &&
        (localStorage.setItem("name", feedbackName.value),
        localStorage.setItem("email", feedbackEmail.value))
      : (e.preventDefault(),
        feedbackPopup.classList.remove("modal-error"),
        (feedbackPopup.offsetWidth = feedbackPopup.offsetWidth),
        feedbackPopup.classList.add("modal-error"));
  }),
  window.addEventListener("keydown", function (e) {
    27 === e.keyCode &&
      feedbackPopup.classList.contains("modal-show") &&
      (e.preventDefault(),
      feedbackPopup.classList.remove("modal-show"),
      feedbackPopup.classList.remove("modal-error"));
  }),
  mapLink.addEventListener("click", function (e) {
    e.preventDefault(), mapPopup.classList.add("modal-show");
  }),
  mapClose.addEventListener("click", function (e) {
    e.preventDefault(), mapPopup.classList.remove("modal-show");
  }),
  window.addEventListener("keydown", function (e) {
    27 === e.keyCode &&
      mapPopup.classList.contains("modal-show") &&
      (e.preventDefault(), mapPopup.classList.remove("modal-show"));
  });
